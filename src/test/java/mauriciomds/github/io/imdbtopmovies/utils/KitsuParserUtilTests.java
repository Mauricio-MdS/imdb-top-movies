package mauriciomds.github.io.imdbtopmovies.utils;

import static org.junit.jupiter.api.Assertions.assertInstanceOf;

import java.util.List;

import org.junit.jupiter.api.Test;

import mauriciomds.github.io.imdbtopmovies.models.Anime;
import mauriciomds.github.io.imdbtopmovies.models.Content;

class KitsuParserUtilTests {

	@Test
	void kitsuParserShouldReturnAListOfAnimes() {
		String unparsedText = "{\"data\":[{\"id\":\"44081\",\"type\":\"anime\",\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081\"},\"attributes\":{\"createdAt\":\"2021-02-15T11:33:43.860Z\",\"updatedAt\":\"2022-07-05T21:47:30.754Z\",\"slug\":\"kimetsu-no-yaiba-yuukaku-hen\",\"synopsis\":\"After visiting the Rengoku residence, Tanjirou and his comrades volunteer for a mission within the Entertainment District, a place where desires are sold and demons dwell. They journey alongside the flashy Sound Hashira, Tengen Uzui, in search of a monstrous foe terrorizing the town. Sworn to slay creatures of the night, the hunt continues.\n\n(Source: Funimation)\",\"description\":\"After visiting the Rengoku residence, Tanjirou and his comrades volunteer for a mission within the Entertainment District, a place where desires are sold and demons dwell. They journey alongside the flashy Sound Hashira, Tengen Uzui, in search of a monstrous foe terrorizing the town. Sworn to slay creatures of the night, the hunt continues.\n\n(Source: Funimation)\",\"coverImageTopOffset\":0,\"titles\":{\"en\":\"Demon Slayer: Kimetsu no Yaiba - Entertainment District Arc\",\"en_jp\":\"Kimetsu no Yaiba: Yuukaku-hen\",\"ja_jp\":\"鬼滅の刃 遊郭編\"},\"canonicalTitle\":\"Kimetsu no Yaiba: Yuukaku-hen\",\"abbreviatedTitles\":[\"Kimetsu no Yaiba 2\",\"Demon Slayer: Kimetsu no Yaiba Season 2\",\"Demon Slayer 2\",\"Demon Slayer: Kimetsu no Yaiba - Yuukaku-hen\"],\"averageRating\":\"87.78\",\"ratingFrequencies\":{\"2\":\"1015\",\"3\":\"23\",\"4\":\"90\",\"5\":\"24\",\"6\":\"81\",\"7\":\"38\",\"8\":\"1460\",\"9\":\"43\",\"10\":\"210\",\"11\":\"65\",\"12\":\"284\",\"13\":\"104\",\"14\":\"5547\",\"15\":\"233\",\"16\":\"1357\",\"17\":\"585\",\"18\":\"1884\",\"19\":\"506\",\"20\":\"25293\"},\"userCount\":0,\"favoritesCount\":0,\"startDate\":\"2021-12-05\",\"endDate\":\"2022-02-13\",\"nextRelease\":null,\"popularityRank\":18831,\"ratingRank\":1,\"ageRating\":\"R\",\"ageRatingGuide\":\"17+ (violence & profanity)\",\"subtype\":\"TV\",\"status\":\"finished\",\"tba\":null,\"posterImage\":{\"tiny\":\"https://media.kitsu.io/anime/44081/poster_image/tiny-c052e6ebd373b5d9975a272ac1bffba2.jpeg\",\"large\":\"https://media.kitsu.io/anime/44081/poster_image/large-049ba5097e6d6dbb515a0584a7ccd3b2.jpeg\",\"small\":\"https://media.kitsu.io/anime/44081/poster_image/small-bad9c70bdbe84bdc00b0704fb54c4f9f.jpeg\",\"medium\":\"https://media.kitsu.io/anime/44081/poster_image/medium-41a407e1e475b4d99ba5569c6d7dd6bd.jpeg\",\"original\":\"https://media.kitsu.io/anime/44081/poster_image/4b749200e30cbdb20ab4ef2c6961688b.jpg\",\"meta\":{\"dimensions\":{\"tiny\":{\"width\":110,\"height\":156},\"large\":{\"width\":550,\"height\":780},\"small\":{\"width\":284,\"height\":402},\"medium\":{\"width\":390,\"height\":554}}}},\"coverImage\":{\"tiny\":\"https://media.kitsu.io/anime/44081/cover_image/tiny-f039c84e130ebb9c0453016e58cc6241.jpeg\",\"large\":\"https://media.kitsu.io/anime/44081/cover_image/large-a5ef1fa23f686e8f2b11f4d33fe38b92.jpeg\",\"small\":\"https://media.kitsu.io/anime/44081/cover_image/small-840ec82f0786fef4c1b53f91029c3923.jpeg\",\"original\":\"https://media.kitsu.io/anime/44081/cover_image/76f0b283fe588a7b0c4782d4c2dc9b99.jpg\",\"meta\":{\"dimensions\":{\"tiny\":{\"width\":840,\"height\":200},\"large\":{\"width\":3360,\"height\":800},\"small\":{\"width\":1680,\"height\":400}}}},\"episodeCount\":11,\"episodeLength\":null,\"totalLength\":0,\"youtubeVideoId\":\"XoJCOAU_72U\",\"showType\":\"TV\",\"nsfw\":false},\"relationships\":{\"genres\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/genres\",\"related\":\"https://kitsu.io/api/edge/anime/44081/genres\"}},\"categories\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/categories\",\"related\":\"https://kitsu.io/api/edge/anime/44081/categories\"}},\"castings\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/castings\",\"related\":\"https://kitsu.io/api/edge/anime/44081/castings\"}},\"installments\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/installments\",\"related\":\"https://kitsu.io/api/edge/anime/44081/installments\"}},\"mappings\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/mappings\",\"related\":\"https://kitsu.io/api/edge/anime/44081/mappings\"}},\"reviews\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/reviews\",\"related\":\"https://kitsu.io/api/edge/anime/44081/reviews\"}},\"mediaRelationships\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/media-relationships\",\"related\":\"https://kitsu.io/api/edge/anime/44081/media-relationships\"}},\"characters\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/characters\",\"related\":\"https://kitsu.io/api/edge/anime/44081/characters\"}},\"staff\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/staff\",\"related\":\"https://kitsu.io/api/edge/anime/44081/staff\"}},\"productions\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/productions\",\"related\":\"https://kitsu.io/api/edge/anime/44081/productions\"}},\"quotes\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/quotes\",\"related\":\"https://kitsu.io/api/edge/anime/44081/quotes\"}},\"episodes\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/episodes\",\"related\":\"https://kitsu.io/api/edge/anime/44081/episodes\"}},\"streamingLinks\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/streaming-links\",\"related\":\"https://kitsu.io/api/edge/anime/44081/streaming-links\"}},\"animeProductions\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/anime-productions\",\"related\":\"https://kitsu.io/api/edge/anime/44081/anime-productions\"}},\"animeCharacters\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/anime-characters\",\"related\":\"https://kitsu.io/api/edge/anime/44081/anime-characters\"}},\"animeStaff\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44081/relationships/anime-staff\",\"related\":\"https://kitsu.io/api/edge/anime/44081/anime-staff\"}}}},{\"id\":\"44389\",\"type\":\"anime\",\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389\"},\"attributes\":{\"createdAt\":\"2021-04-17T01:26:11.409Z\",\"updatedAt\":\"2022-07-05T21:46:19.481Z\",\"slug\":\"kimetsu-no-yaiba-natagumo-yama-hen\",\"synopsis\":\"Compilation movie of episodes 15-21 with some new footage and a special ending credits roll.\",\"description\":\"Compilation movie of episodes 15-21 with some new footage and a special ending credits roll.\",\"coverImageTopOffset\":0,\"titles\":{\"en\":\"Demon Slayer: Kimetsu no Yaiba Mt. Natagumo Arc\",\"en_jp\":\"Kimetsu no Yaiba: Natagumo Yama Hen\",\"ja_jp\":\"鬼滅の刃 那田蜘蛛山編\"},\"canonicalTitle\":\"Kimetsu no Yaiba: Natagumo Yama Hen\",\"abbreviatedTitles\":[],\"averageRating\":\"87.44\",\"ratingFrequencies\":{\"2\":\"1299\",\"3\":\"32\",\"4\":\"107\",\"5\":\"38\",\"6\":\"110\",\"7\":\"49\",\"8\":\"1879\",\"9\":\"70\",\"10\":\"277\",\"11\":\"102\",\"12\":\"311\",\"13\":\"90\",\"14\":\"7816\",\"15\":\"199\",\"16\":\"1191\",\"17\":\"359\",\"18\":\"1224\",\"19\":\"264\",\"20\":\"31855\"},\"userCount\":0,\"favoritesCount\":0,\"startDate\":\"2020-10-17\",\"endDate\":\"2020-10-17\",\"nextRelease\":null,\"popularityRank\":18829,\"ratingRank\":2,\"ageRating\":\"R\",\"ageRatingGuide\":null,\"subtype\":\"movie\",\"status\":\"finished\",\"tba\":null,\"posterImage\":{\"tiny\":\"https://media.kitsu.io/anime/poster_images/44389/tiny.jpg\",\"large\":\"https://media.kitsu.io/anime/poster_images/44389/large.jpg\",\"small\":\"https://media.kitsu.io/anime/poster_images/44389/small.jpg\",\"medium\":\"https://media.kitsu.io/anime/poster_images/44389/medium.jpg\",\"original\":\"https://media.kitsu.io/anime/poster_images/44389/original.jpg\",\"meta\":{\"dimensions\":{\"tiny\":{\"width\":110,\"height\":156},\"large\":{\"width\":550,\"height\":780},\"small\":{\"width\":284,\"height\":402},\"medium\":{\"width\":390,\"height\":554}}}},\"coverImage\":{\"tiny\":\"https://media.kitsu.io/anime/cover_images/44389/tiny.jpg\",\"large\":\"https://media.kitsu.io/anime/cover_images/44389/large.jpg\",\"small\":\"https://media.kitsu.io/anime/cover_images/44389/small.jpg\",\"original\":\"https://media.kitsu.io/anime/cover_images/44389/original.jpg\",\"meta\":{\"dimensions\":{\"tiny\":{\"width\":840,\"height\":200},\"large\":{\"width\":3360,\"height\":800},\"small\":{\"width\":1680,\"height\":400}}}},\"episodeCount\":1,\"episodeLength\":137,\"totalLength\":137,\"youtubeVideoId\":null,\"showType\":\"movie\",\"nsfw\":false},\"relationships\":{\"genres\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/genres\",\"related\":\"https://kitsu.io/api/edge/anime/44389/genres\"}},\"categories\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/categories\",\"related\":\"https://kitsu.io/api/edge/anime/44389/categories\"}},\"castings\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/castings\",\"related\":\"https://kitsu.io/api/edge/anime/44389/castings\"}},\"installments\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/installments\",\"related\":\"https://kitsu.io/api/edge/anime/44389/installments\"}},\"mappings\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/mappings\",\"related\":\"https://kitsu.io/api/edge/anime/44389/mappings\"}},\"reviews\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/reviews\",\"related\":\"https://kitsu.io/api/edge/anime/44389/reviews\"}},\"mediaRelationships\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/media-relationships\",\"related\":\"https://kitsu.io/api/edge/anime/44389/media-relationships\"}},\"characters\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/characters\",\"related\":\"https://kitsu.io/api/edge/anime/44389/characters\"}},\"staff\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/staff\",\"related\":\"https://kitsu.io/api/edge/anime/44389/staff\"}},\"productions\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/productions\",\"related\":\"https://kitsu.io/api/edge/anime/44389/productions\"}},\"quotes\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/quotes\",\"related\":\"https://kitsu.io/api/edge/anime/44389/quotes\"}},\"episodes\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/episodes\",\"related\":\"https://kitsu.io/api/edge/anime/44389/episodes\"}},\"streamingLinks\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/streaming-links\",\"related\":\"https://kitsu.io/api/edge/anime/44389/streaming-links\"}},\"animeProductions\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/anime-productions\",\"related\":\"https://kitsu.io/api/edge/anime/44389/anime-productions\"}},\"animeCharacters\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/anime-characters\",\"related\":\"https://kitsu.io/api/edge/anime/44389/anime-characters\"}},\"animeStaff\":{\"links\":{\"self\":\"https://kitsu.io/api/edge/anime/44389/relationships/anime-staff\",\"related\":\"https://kitsu.io/api/edge/anime/44389/anime-staff\"}}}}],\"meta\":{\"count\":17908},\"links\":{\"first\":\"https://kitsu.io/api/edge/anime?page%5Blimit%5D=2&page%5Boffset%5D=0&sort=ratingRank\",\"next\":\"https://kitsu.io/api/edge/anime?page%5Blimit%5D=2&page%5Boffset%5D=2&sort=ratingRank\",\"last\":\"https://kitsu.io/api/edge/anime?page%5Blimit%5D=2&page%5Boffset%5D=17906&sort=ratingRank\"}}";
		List<Content> animes = KitsuParserUtil.stringToListOfContent(unparsedText);
		assertInstanceOf(List.class, animes);
		assertInstanceOf(Anime.class, animes.get(0));
	}

}
